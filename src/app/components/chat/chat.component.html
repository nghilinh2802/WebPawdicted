<!-- src/app/components/chat/chat.component.html -->
<div class="pawdicted-chat-container">
  <div class="customers-sidebar">
    <div class="shop-header">
      <h3>ğŸ¾ Pawdicted Chat</h3>
      <p>Há»— trá»£ khÃ¡ch hÃ ng</p>
    </div>
    
    <div class="customers-list">
      <div 
        *ngFor="let chat of chatRooms$ | async" 
        class="customer-item"
        [class.active]="selectedChat?.chat_id === chat.chat_id"
        [class.unread]="hasUnreadMessages(chat)"
        (click)="selectChat(chat)">
        
        <div class="customer-info">
          <div class="customer-name">
            <strong>{{ chat.customer_id }}</strong>
            <span class="unread-badge" *ngIf="hasUnreadMessages(chat)">â—</span>
          </div>
          <div class="last-message">
            {{ getLastMessage(chat) }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="chat-main">
    <!-- KhÃ´ng hiá»ƒn thá»‹ gÃ¬ náº¿u chÆ°a cÃ³ chat nÃ o -->
    <div *ngIf="(chatRooms$ | async)?.length === 0" class="no-chats-available">
      <div class="welcome-message">
        <h4>ğŸ¾ Pawdicted Chat</h4>
        <p>ChÆ°a cÃ³ khÃ¡ch hÃ ng nÃ o nháº¯n tin</p>
      </div>
    </div>

    <!-- Hiá»ƒn thá»‹ message chá»n chat khi cÃ³ chat nhÆ°ng chÆ°a chá»n -->
    <div *ngIf="(chatRooms$ | async)?.length! > 0 && !selectedChat" class="no-customer-selected">
      <div class="welcome-message">
        <h4>ğŸ¾ ChÃ o má»«ng Ä‘áº¿n Pawdicted!</h4>
        <p>Chá»n má»™t khÃ¡ch hÃ ng Ä‘á»ƒ báº¯t Ä‘áº§u trÃ² chuyá»‡n</p>
      </div>
    </div>

    <div *ngIf="selectedChat" class="chat-window">
      <div class="chat-header">
        <h4>ğŸ’¬ Chat vá»›i {{ selectedChat?.customer_id }}</h4>
        <span class="customer-status">KhÃ¡ch hÃ ng Pawdicted</span>
      </div>

      <div class="messages-container">
        <div 
          *ngFor="let message of allMessages" 
          class="message"
          [class.customer-message]="message.sender === 'customer'"
          [class.pawdicted-message]="message.sender === 'pawdicted'">
          
          <div class="message-bubble">
            <p>{{ message.content }}</p>
            <small>{{ message.time | date:'HH:mm' }}</small>
          </div>
        </div>
      </div>

      <div class="message-input">
        <input 
          type="text" 
          [(ngModel)]="newMessage" 
          placeholder="Nháº­p tin nháº¯n há»— trá»£ khÃ¡ch hÃ ng..."
          (keyup.enter)="sendMessage()"
          class="message-input-field">
        <button 
          (click)="sendMessage()" 
          [disabled]="!newMessage.trim()"
          class="send-button">
          ğŸ“¤ Gá»­i
        </button>
      </div>
    </div>
  </div>
</div>
